"use strict";(self.webpackChunkbesom_website=self.webpackChunkbesom_website||[]).push([[443],{936:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"architecture","title":"Overview","description":"Pulumi runtime is asynchronous by design. The goal is to allow the user\'s program to declare all the necessary resources","source":"@site/docs/architecture.md","sourceDirName":".","slug":"/architecture","permalink":"/besom/docs/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/VirtusLab/besom/tree/main/website/docs/architecture.md","tags":[],"version":"current","frontMatter":{"title":"Overview"},"sidebar":"docsSidebar","previous":{"title":"Basics","permalink":"/besom/docs/basics"},"next":{"title":"Context and imports","permalink":"/besom/docs/context"}}');var o=t(4848),i=t(8453);const r={title:"Overview"},a=void 0,c={},l=[];function d(e){const s={a:"a",code:"code",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.p,{children:["Pulumi runtime is ",(0,o.jsx)(s.strong,{children:"asynchronous by design"}),". The goal is to allow the user's program to declare all the necessary resources\nas fast as possible so that Pulumi engine can make informed decisions about which parts of the deployment plan can be\nexecuted in parallel and therefore yield good performance."]}),"\n",(0,o.jsxs)(s.p,{children:["Each of the Pulumi SDKs reflects this reality by leveraging the language's asynchronous datatype to implement\nthe internals of the SDK that communicate with Pulumi engine via gRPC.\nFor Python, it's ",(0,o.jsx)(s.code,{children:"asyncio"}),", for JavaScript and TypeScript it's ",(0,o.jsx)(s.code,{children:"Promise"}),",\nfor C# it's ",(0,o.jsx)(s.code,{children:"Task"})," and for Java it's ",(0,o.jsx)(s.code,{children:"CompletableFuture"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["Scala is a ",(0,o.jsx)(s.strong,{children:"bit different"})," in this regard. Due to extraordinary amount of innovation happening in the community and the\noverall focus on concurrency and asynchronicity Scala now has 3 main asynchronous, concurrent data types:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["standard library's ",(0,o.jsx)(s.code,{children:"Future"}),", which is used heavily in Akka / Pekko ecosystems,"]}),"\n",(0,o.jsxs)(s.li,{children:["cats-effect ",(0,o.jsx)(s.code,{children:"IO"})," used extensively by the cats ecosystem"]}),"\n",(0,o.jsxs)(s.li,{children:["and ",(0,o.jsx)(s.code,{children:"ZIO"})," that also has its own ecosystem."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["The last two of these data types are ",(0,o.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Lazy_evaluation",children:"lazily evaluated"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["To support and integrate them with Besom a decision was made to encode the SDK using the same ",(0,o.jsx)(s.strong,{children:"lazy and pure semantics"}),"\nof execution that leverage the preferred datatype of the user. While this architectural choice has little impact on what\ncan be done currently in standalone Pulumi programs, in the future we are going to support Pulumi's Automation API\nwhich allows users to directly embed Besom into their applications.\nIt is at that point when direct integration with all 3 technological stacks will be the most meaningful."]}),"\n",(0,o.jsxs)(s.p,{children:["Besom stands alone in this choice and due to it ",(0,o.jsx)(s.strong,{children:"has some differences"})," in comparison to how other Pulumi SDKs operate."]}),"\n",(0,o.jsx)(s.p,{children:"Following sections explain and showcase said differences:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/besom/docs/context",children:"Context"})," - context is passed around implicitly via Scala's Context Function"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/besom/docs/exports",children:"Exports"})," - your program is a function that returns Stack along with its Stack Outputs"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/besom/docs/io",children:"Inputs and Outputs"})," - Outputs are static or dynamic properties passed to Inputs to configure resources"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/besom/docs/constructors",children:"Resource constructors"})," - resource constructors are pure functions that return Outputs"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/besom/docs/laziness",children:"Laziness"})," - dangling resources are possible and resource constructors are memoized"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/besom/docs/apply_methods",children:"Apply method"})," - use ",(0,o.jsx)(s.code,{children:"map"})," and ",(0,o.jsx)(s.code,{children:"flatMap"})," to compose Outputs, not ",(0,o.jsx)(s.code,{children:"apply"})]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/besom/docs/logging",children:"Logging"})," - all logging statements need to be composed into the main flow"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/besom/docs/lifting",children:"Lifting"})," - first class support of lifting via Scala 3 extension methods"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/besom/docs/interpolator",children:"String interpolation"})," - use ",(0,o.jsx)(s.code,{children:"p"})," type-safe string interpolator"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/besom/docs/components",children:"Components"})," - use ",(0,o.jsx)(s.code,{children:"case class"})," to define components"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/besom/docs/compiler_plugin",children:"Compiler plugin"})," - use the compiler plugin to catch mistakes early and avoid common pitfalls"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>r,x:()=>a});var n=t(6540);const o={},i=n.createContext(o);function r(e){const s=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);