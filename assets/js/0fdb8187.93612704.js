"use strict";(self.webpackChunkbesom_website=self.webpackChunkbesom_website||[]).push([[953],{7798:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>i,default:()=>d,frontMatter:()=>c,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"constructors","title":"Resource constructors","description":"Resources","source":"@site/docs/constructors.md","sourceDirName":".","slug":"/constructors","permalink":"/besom/docs/constructors","draft":false,"unlisted":false,"editUrl":"https://github.com/VirtusLab/besom/tree/main/website/docs/constructors.md","tags":[],"version":"current","frontMatter":{"title":"Resource constructors"},"sidebar":"docsSidebar","previous":{"title":"Inputs and Outputs","permalink":"/besom/docs/io"},"next":{"title":"Resource constructor asynchronicity","permalink":"/besom/docs/async"}}');var r=n(4848),o=n(8453);const c={title:"Resource constructors"},i=void 0,a={},u=[{value:"Resources",id:"resources",level:2},{value:"Resource constructor syntax",id:"resource-constructor-syntax",level:2},{value:"Compile time checking",id:"compile-time-checking",level:2}];function l(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"resources",children:"Resources"}),"\n",(0,r.jsxs)(s.p,{children:["Resources are the ",(0,r.jsx)(s.a,{href:"/besom/docs/basics#resources",children:"primary construct of Pulumi"})," programs."]}),"\n",(0,r.jsx)(s.h2,{id:"resource-constructor-syntax",children:"Resource constructor syntax"}),"\n",(0,r.jsxs)(s.p,{children:["Most Pulumi SDKs expect you to create resource objects by invoking their constructors with ",(0,r.jsx)(s.code,{children:"new"})," keyword,\nfor example in TypeScript:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:'const s3Bucket: aws.s3.Bucket = new aws.s3.Bucket("my-bucket")\n'})}),"\n",(0,r.jsxs)(s.p,{children:["This operation returns a resource object of type ",(0,r.jsx)(s.code,{children:"aws.s3.Bucket"})," that has several fields,\neach of an ",(0,r.jsx)(s.a,{href:"/besom/docs/io#outputs",children:(0,r.jsx)(s.code,{children:"Output[A]"})})," type. The values will be provided by the engine later, when the resource is created\nand its properties can be fetched."]}),"\n",(0,r.jsxs)(s.p,{children:["For all of that to happen this synchronous constructor call has to ",(0,r.jsx)(s.strong,{children:"hide the complex, asynchronous machinery"})," that\ntriggers the communication with Pulumi engine and resolves underlying ",(0,r.jsx)(s.code,{children:"Promise"}),"-like datatype wrapped by each Output.\nThis cannot be done in a pure way and due to that ",(0,r.jsx)(s.strong,{children:"resource constructors in Besom also return Outputs"})," lifting them\nto become primary construct in terms of which user declares his program."]}),"\n",(0,r.jsxs)(s.p,{children:["This is very similar to the known pattern involving Scala's Future's, cats ",(0,r.jsx)(s.code,{children:"IO"})," or ",(0,r.jsx)(s.code,{children:"ZIO"})," where once you start\nexpressing your program using such a construct you build everything in these terms and only ",(0,r.jsx)(s.code,{children:"Await"})," or ",(0,r.jsx)(s.code,{children:"unsafeRun"}),"\nthem in your main function."]}),"\n",(0,r.jsx)(s.p,{children:"Here's an example of said resource constructor in Besom:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-scala",children:'val s3Bucket: Output[aws.s3.Bucket] = aws.s3.Bucket("my-bucket")\n'})}),"\n",(0,r.jsx)(s.admonition,{type:"tip",children:(0,r.jsx)(s.p,{children:"We have retained the CamelCase naming convention of resource constructors for parity with other Pulumi SDKs.\nYou can always expect resource constructor names to start with capital letter."})}),"\n",(0,r.jsx)(s.p,{children:"Resource constructors always take 3 arguments:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["resource name - this is an unique name of the resource in Pulumi's state management. Uniqueness is limited\nto stack and the string has to be a ",(0,r.jsx)(s.code,{children:"NonEmptyString"})," (most of the time Besom will be able to infer automatically\nif ",(0,r.jsx)(s.code,{children:"String"})," literal is non-empty but in case of ambiguity you can just add a type ascription ",(0,r.jsx)(s.code,{children:": NonEmptyString"}),"\nor, in case of dynamically obtained values, use ",(0,r.jsx)(s.code,{children:"NonEmptyString"}),"'s ",(0,r.jsx)(s.code,{children:"apply"})," method that returns\n",(0,r.jsx)(s.code,{children:"Option[NonEmptyString]"}),")."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["resource args - each resource has it's own companion args class (for instance, ",(0,r.jsx)(s.code,{children:"aws.s3.Bucket"})," has a\n",(0,r.jsx)(s.code,{children:"aws.s3.BucketArgs"}),") that takes ",(0,r.jsx)(s.code,{children:"Input"}),"s of values necessary to configure the resource. Args can be optional\nwhen there are reasonable defaults and no input is necessary from the user."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["resource options - ",(0,r.jsx)(s.a,{href:"https://www.pulumi.com/docs/concepts/options/",children:"resource options"})," are additional properties\nthat tell Pulumi engine how to apply changes related to this particular resource. Resource options are always\noptional. These options dictate the order of creation (explicit dependency between resources otherwise unrelated\non data level), destruction, the way of performing updates (for instance delete and recreate) and which provider\ninstance to use. There are 3 types of resource options:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"CustomResourceOptions"})," used with most of the resources defined in provider packages"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ComponentResourceOptions"})," used with resources, both user-defined and remote components (defined in provider packages)\nand finally"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"StackReferenceResourceOptions"})," used with ",(0,r.jsx)(s.a,{href:"/besom/docs/basics#stack-references",children:"StackReferences"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["To ease the use of resource options a shortcut context function is provided that allows user to summon the constructor\nof expected resource options type by just typing ",(0,r.jsx)(s.code,{children:"opts(...)"}),". Here's an example:"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-scala",children:'val myAwsProvider: Output[aws.Provider] = aws.Provider("my-aws-provider", aws.ProviderArgs(...))\n\nval s3Bucket: Output[aws.s3.Bucket] = aws.s3.Bucket(\n  "my-bucket",\n  aws.s3.BucketArgs(...),\n  opts(provider = myAwsProvider)\n)\n'})}),"\n",(0,r.jsx)(s.h2,{id:"compile-time-checking",children:"Compile time checking"}),"\n",(0,r.jsx)(s.p,{children:"Besom tries to catch as many errors as possible at compile time, examples of our compile time checks are:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["A component resource must register a correct type name with the base constructor in format: ",(0,r.jsx)(s.code,{children:"<package>:<module>:<type>"})]}),"\n",(0,r.jsxs)(s.li,{children:["A component resource class should have a ",(0,r.jsx)(s.code,{children:"(using ComponentBase)"})," parameter clause at the end of its constructor"]}),"\n"]})]})}function d(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>i});var t=n(6540);const r={},o=t.createContext(r);function c(e){const s=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),t.createElement(o.Provider,{value:s},e.children)}}}]);