"use strict";(self.webpackChunkbesom_website=self.webpackChunkbesom_website||[]).push([[48],{5788:(e,t,n)=>{n.d(t,{Iu:()=>p,yg:()=>g});var r=n(1504);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},y=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),y=a,g=u["".concat(s,".").concat(y)]||u[y]||d[y]||o;return n?r.createElement(g,i(i({ref:t},p),{},{components:n})):r.createElement(g,i({ref:t},p))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=y;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}y.displayName="MDXCreateElement"},8272:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=n(5072),a=(n(1504),n(5788));const o={title:"Changelog"},i=void 0,l={unversionedId:"changelog",id:"changelog",title:"Changelog",description:"0.2.0",source:"@site/docs/changelog.md",sourceDirName:".",slug:"/changelog",permalink:"/besom/docs/changelog",draft:!1,tags:[],version:"current",frontMatter:{title:"Changelog"},sidebar:"docsSidebar",previous:{title:"Templates",permalink:"/besom/docs/templates"}},s={},c=[{value:"0.2.0",id:"020",level:2}],p={toc:c},u="wrapper";function d(e){let{components:t,...n}=e;return(0,a.yg)(u,(0,r.c)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h2",{id:"020"},"0.2.0"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Changed the type of main ",(0,a.yg)("inlineCode",{parentName:"li"},"Pulumi.run")," function from ",(0,a.yg)("inlineCode",{parentName:"li"},"Context ?=> Output[Exports]")," (a ",(0,a.yg)("a",{parentName:"li",href:"https://docs.scala-lang.org/scala3/reference/contextual/context-functions.html"},"context function")," providing ",(0,a.yg)("inlineCode",{parentName:"li"},"besom.Context")," instance implicitly in it's scope and expecting ",(0,a.yg)("inlineCode",{parentName:"li"},"Output[Exports]")," as returned value) to ",(0,a.yg)("inlineCode",{parentName:"li"},"Context ?=> Stack"),". This change has one core reason: it helps us solve a problem related to dry run functionality that was hindered when a external Output was interwoven in the final for-comprehension. External Outputs (Outputs that depend on real return values from Pulumi engine) no-op their flatMap/map chains in dry run similarly to Option's None (because there is no value to feed to the passed function) and therefore led to exports code not being executed in dry run at all, causing a diff showing that all exports are going to be removed in preview and then recreated in apply phase. New type of ",(0,a.yg)("inlineCode",{parentName:"li"},"Pulumi.run")," function disallows returning of async values - Stack has to be returned unwrapped, synchronously. Stack is just a case class that takes only two arguments: ",(0,a.yg)("inlineCode",{parentName:"li"},"exports: Exports")," and ",(0,a.yg)("inlineCode",{parentName:"li"},"dependsOn: Vector[Output[?]]"),". ",(0,a.yg)("inlineCode",{parentName:"li"},"exports")," serve the same purpose as before and ",(0,a.yg)("inlineCode",{parentName:"li"},"dependsOn")," is used to ",(0,a.yg)("em",{parentName:"li"},"use")," all the ",(0,a.yg)("inlineCode",{parentName:"li"},"Outputs")," that have to be evaluated for this stack to be constructed but are not to be exported. You can return a ",(0,a.yg)("inlineCode",{parentName:"li"},"Stack")," that only consists of exports (for instance when everything you depend on is composed into a thing that you export in the final step) using ",(0,a.yg)("inlineCode",{parentName:"li"},"Stack.export(x = a, y = b)")," or a ",(0,a.yg)("inlineCode",{parentName:"li"},"Stack")," that has only dependencies when you don't want to export anything using ",(0,a.yg)("inlineCode",{parentName:"li"},"Stack(x, y)"),". You can also use some resources and export others using ",(0,a.yg)("inlineCode",{parentName:"li"},"Stack(a, b).export(x = i, y = j)")," syntax. Here's an example use of Stack:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-scala"},'@main def main = Pulumi.run {\n  val awsPolicy = aws.iam.Policy("my-policy", ...)\n  val s3 = aws.s3.Bucket("my-bucket")\n  val logMessage = log.info("Creating your bucket!") // logs are values too!\n\n  Stack(logMessage, awsPolicy).exports(\n    url = s3.publicEndpoint\n  )\n}\n')))}d.isMDXComponent=!0}}]);