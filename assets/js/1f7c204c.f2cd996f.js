"use strict";(self.webpackChunkbesom_website=self.webpackChunkbesom_website||[]).push([[254],{4256:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>r,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"components","title":"Components","description":"Pulumi allows users to define their own logical aggregations of resources called components and so does Besom.","source":"@site/docs/components.md","sourceDirName":".","slug":"/components","permalink":"/besom/docs/components","draft":false,"unlisted":false,"editUrl":"https://github.com/VirtusLab/besom/tree/main/website/docs/components.md","tags":[],"version":"current","frontMatter":{"title":"Components"},"sidebar":"docsSidebar","previous":{"title":"String interpolation","permalink":"/besom/docs/interpolator"},"next":{"title":"JSON API","permalink":"/besom/docs/json"}}');var o=t(4848),i=t(8453);const r={title:"Components"},c=void 0,a={},l=[];function d(e){const s={a:"a",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.p,{children:["Pulumi allows users to define their own logical aggregations of resources called ",(0,o.jsx)(s.a,{href:"https://www.pulumi.com/docs/concepts/resources/components/",children:"components"})," and so does Besom.\nThe API is a ",(0,o.jsx)(s.strong,{children:"bit different"})," in ",(0,o.jsx)(s.a,{href:"https://www.pulumi.com/docs/concepts/resources/components/",children:"comparison to other Pulumi SDKs"}),".\nUser is expected to define a ",(0,o.jsx)(s.code,{children:"case class"})," that will contain\nall the ",(0,o.jsx)(s.code,{children:"Output"})," properties one wants to expose from the internals of the component."]}),"\n",(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"case class"})," has to:"]}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["extend ",(0,o.jsx)(s.code,{children:"besom.ComponentResource"})," trait"]}),"\n",(0,o.jsxs)(s.li,{children:["have a ",(0,o.jsx)(s.code,{children:"(using ComponentBase)"})," clause after it's primary constructor"]}),"\n",(0,o.jsxs)(s.li,{children:["have a ",(0,o.jsx)(s.code,{children:"derives RegistersOutputs"})," at the end of it's class declaration"]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["Next step is to declare a function that will use the ",(0,o.jsx)(s.code,{children:"component"})," constructor function to compose all the resources together.\nEvery ",(0,o.jsx)(s.code,{children:"component"})," expects:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["a ",(0,o.jsx)(s.strong,{children:"unique resource name"})," as the first argument (usually it's an information that the end user has to provide)"]}),"\n",(0,o.jsxs)(s.li,{children:["a ",(0,o.jsxs)(s.a,{href:"https://www.pulumi.com/docs/concepts/resources/names/#types",children:[(0,o.jsx)(s.strong,{children:"resource type"})," which is a string formatted specifically to fit Pulumi's model"]})]}),"\n",(0,o.jsxs)(s.li,{children:["and, as the second argument list of ",(0,o.jsx)(s.code,{children:"component"})," function, the ",(0,o.jsx)(s.strong,{children:"block of code"})," that defines all the resources\nthat should belong to the component."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"Here's a small example using the S3 bucket resource again:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-scala",children:'import besom.*\nimport besom.api.aws\nimport java.time.OffsetDateTime\n\ncase class ZooVisit(\n  catPicsUrl: Output[String], \n  parrotPicsUrl: Output[String]\n)(using ComponentBase) \n  extends ComponentResource \n  derives RegistersOutputs\nobject ZooVisit:\n  def apply(date: OffsetDateTime)(using Context): Output[ZooVisit] = \n    component(s"zoo-visit-at-$date", "user:component:ZooVisit") { \n      val cats = aws.s3.Bucket(s"cats-$date")\n      val parrots = aws.s3.Bucket(s"parrot-$date")\n      ZooVisit(cats.websiteEndpoint, parrots.websiteEndpoint)\n    }\n\n@main def main = Pulumi.run {\n  val visit = ZooVisit(OffsetDateTime.now())\n\n  Stack.exports(\n    cats    = visit.map(_.catPicsUrl),\n    parrots = visit.map(_.parrotPicsUrl)\n  )\n}\n'})})]})}function p(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>r,x:()=>c});var n=t(6540);const o={},i=n.createContext(o);function r(e){const s=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);