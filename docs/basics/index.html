<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-basics" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Pulumi Basics | Besom - Pulumi Scala</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://virtuslab.github.io/besom/img/Besom_logo_black.png"><meta data-rh="true" name="twitter:image" content="https://virtuslab.github.io/besom/img/Besom_logo_black.png"><meta data-rh="true" property="og:url" content="https://virtuslab.github.io/besom/docs/basics/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Pulumi Basics | Besom - Pulumi Scala"><meta data-rh="true" name="description" content="Before we dive into the details of Besom, let&#x27;s take a look at the basics of Pulumi."><meta data-rh="true" property="og:description" content="Before we dive into the details of Besom, let&#x27;s take a look at the basics of Pulumi."><link data-rh="true" rel="icon" href="/besom/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://virtuslab.github.io/besom/docs/basics/"><link data-rh="true" rel="alternate" href="https://virtuslab.github.io/besom/docs/basics/" hreflang="en"><link data-rh="true" rel="alternate" href="https://virtuslab.github.io/besom/docs/basics/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Basics","item":"https://virtuslab.github.io/besom/docs/basics"}]}</script><link rel="alternate" type="application/rss+xml" href="/besom/blog/rss.xml" title="Besom, Scala SDK for Pulumi blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/besom/blog/atom.xml" title="Besom, Scala SDK for Pulumi blog Atom Feed">
<link rel="alternate" type="application/json" href="/besom/blog/feed.json" title="Besom, Scala SDK for Pulumi blog JSON Feed">
<script src="https://plausible.io/js/script.js" defer="defer" data-domain="virtuslab.github.io/besom"></script><link rel="stylesheet" href="/besom/assets/css/styles.46c85403.css">
<script src="/besom/assets/js/runtime~main.776a3018.js" defer="defer"></script>
<script src="/besom/assets/js/main.6527b7c4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/besom/"><div class="navbar__logo"><img src="/besom/img/Besom_logo_full_color.svg" alt="Besom - Pulumi Scala" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/besom/img/Besom_logo_full_color.svg" alt="Besom - Pulumi Scala" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/besom/docs/intro/">Documentation</a><a class="navbar__item navbar__link" href="/besom/blog/">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/virtuslab/besom" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/besom/docs/intro/"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/besom/docs/getting_started/"><span title="Getting started" class="linkLabel_WmDU">Getting started</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/besom/docs/tutorial/"><span title="Tutorial" class="linkLabel_WmDU">Tutorial</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/besom/docs/basics/"><span title="Basics" class="linkLabel_WmDU">Basics</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/besom/docs/architecture/"><span title="Architecture" class="categoryLinkLabel_W154">Architecture</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/architecture/"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/context/"><span title="Context and imports" class="linkLabel_WmDU">Context and imports</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/exports/"><span title="Exports" class="linkLabel_WmDU">Exports</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/io/"><span title="Inputs and Outputs" class="linkLabel_WmDU">Inputs and Outputs</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/constructors/"><span title="Resource constructors" class="linkLabel_WmDU">Resource constructors</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/async/"><span title="Resource constructor asynchronicity" class="linkLabel_WmDU">Resource constructor asynchronicity</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/laziness/"><span title="Laziness" class="linkLabel_WmDU">Laziness</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/apply_methods/"><span title="Apply methods" class="linkLabel_WmDU">Apply methods</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/logging/"><span title="Logging" class="linkLabel_WmDU">Logging</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/lifting/"><span title="Lifting" class="linkLabel_WmDU">Lifting</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/interpolator/"><span title="String interpolation" class="linkLabel_WmDU">String interpolation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/components/"><span title="Components" class="linkLabel_WmDU">Components</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/json/"><span title="JSON API" class="linkLabel_WmDU">JSON API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/compiler_plugin/"><span title="Compiler plugin" class="linkLabel_WmDU">Compiler plugin</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/besom/docs/missing/"><span title="Missing features" class="linkLabel_WmDU">Missing features</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/besom/docs/api_reference/"><span title="API Reference" class="linkLabel_WmDU">API Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/besom/docs/packages/"><span title="Packages" class="linkLabel_WmDU">Packages</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/besom/docs/examples/"><span title="Examples" class="linkLabel_WmDU">Examples</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/besom/docs/templates/"><span title="Pulumi templates" class="linkLabel_WmDU">Pulumi templates</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/besom/docs/changelog/"><span title="Changelog" class="linkLabel_WmDU">Changelog</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/besom/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Basics</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Pulumi Basics</h1></header><p>Before we dive into the <a href="/besom/docs/architecture/">details of Besom</a>, let&#x27;s take a look at the basics of Pulumi.
This page offers an executive summary of <a href="https://www.pulumi.com/docs/concepts/" target="_blank" rel="noopener noreferrer">Pulumi&#x27;s concepts</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-pulumi">What is Pulumi?<a href="#what-is-pulumi" class="hash-link" aria-label="Direct link to What is Pulumi?" title="Direct link to What is Pulumi?" translate="no">​</a></h2>
<p>Pulumi is a modern infrastructure as code platform. It leverages existing programming languages
and their native ecosystem to interact with cloud resources through the Pulumi SDK.</p>
<p>Pulumi is a registered trademark of <a href="https://pulumi.com" target="_blank" rel="noopener noreferrer">Pulumi Corporation</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-besom">What is Besom?<a href="#what-is-besom" class="hash-link" aria-label="Direct link to What is Besom?" title="Direct link to What is Besom?" translate="no">​</a></h2>
<p>Besom is a <strong>Pulumi SDK for Scala 3</strong>. It allows you to use Scala to define your infrastructure
in a type-safe and functional way.</p>
<p>Besom <strong>does NOT depend on Pulumi Java SDK</strong>, it is a completely separate implementation.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Please pay attention to your dependencies, <strong>only use <code>org.virtuslab::besom-*</code></strong> and not <code>com.pulumi:*</code>.<br></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="concepts">Concepts<a href="#concepts" class="hash-link" aria-label="Direct link to Concepts" title="Direct link to Concepts" translate="no">​</a></h2>
<p>It is important to understand the basic concepts of Pulumi before we dive into the details of Besom.
We strongly advise to get acquainted with <a href="https://www.pulumi.com/docs/concepts/" target="_blank" rel="noopener noreferrer">Pulumi&#x27;s concepts</a>
documentation as all of that information applies to Besom as well.</p>
<p>Pulumi uses <a href="#programs">programs</a> to define <a href="#resources">resources</a> that are managed using <a href="#providers">providers</a>
and result in <a href="#stacks">stacks</a>.</p>
<p>For more detailed information
see <a href="https://www.pulumi.com/docs/concepts/how-pulumi-works/#how-pulumi-works" target="_blank" rel="noopener noreferrer">how Pulumi works</a>
documentation section.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="projects">Projects<a href="#projects" class="hash-link" aria-label="Direct link to Projects" title="Direct link to Projects" translate="no">​</a></h3>
<p>A <a href="https://www.pulumi.com/docs/concepts/projects/" target="_blank" rel="noopener noreferrer">Pulumi project</a> consists of:</p>
<ul>
<li>a <a href="#programs">program</a> that defines the desired infrastructure</li>
<li>one or more <a href="#stacks">stack</a> that defines the target environment for the program</li>
<li>and metadata on how to run the program, such
as <a href="https://www.pulumi.com/docs/concepts/projects/#pulumi-yaml" target="_blank" rel="noopener noreferrer"><code>Pulumi.yaml</code></a>
and <a href="https://www.pulumi.com/docs/concepts/projects/#stack-settings-file" target="_blank" rel="noopener noreferrer"><code>Pulumi.&lt;stackname&gt;.yaml</code></a> files.</li>
</ul>
<p>You run the Pulumi CLI command <code>pulumi up</code> from within your project directory to deploy your infrastructure.</p>
<p>Project source code is typically stored in a version control system such as Git.
In addition to the project source code, Pulumi also stores a snapshot of the project state in the <a href="#state">backend</a>.</p>
<p>Besom projects are no different. You can use the same project structure and workflow as you would with other Pulumi
SDKs.
The only difference is that you use <code>runtime: scala</code> in
your <a href="https://www.pulumi.com/docs/concepts/projects/project-file/" target="_blank" rel="noopener noreferrer"><code>Pulumi.yaml</code></a>
with <a href="https://www.pulumi.com/docs/concepts/projects/project-file/#runtime-options" target="_blank" rel="noopener noreferrer">runtime options</a> being:</p>
<ul>
<li><code>binary</code> - a path to pre-built executable JAR</li>
<li><code>use-executor</code> - force a specific executor path instead of probing the project directory and <code>PATH</code></li>
</ul>
<p>A minimal Besom <code>Pulumi.yaml</code> project file:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Example Besom project file with only required attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">runtime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> scala</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="programs">Programs<a href="#programs" class="hash-link" aria-label="Direct link to Programs" title="Direct link to Programs" translate="no">​</a></h3>
<p>A Pulumi program, written in a general-purpose programming language, is a collection of <a href="#resources">resources</a>
that are deployed to form a <a href="#stacks">stack</a>.</p>
<p>A minimal Besom program consists of:</p>
<ul>
<li><code>project.scala</code> - the program dependencies (here we
use <a href="https://scala-cli.virtuslab.org/docs/guides/using-directives/" target="_blank" rel="noopener noreferrer">Scala-CLI directives</a>)<!-- -->
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//&gt; using scala &quot;3.3.6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//&gt; using plugin &quot;org.virtuslab::besom-compiler-plugin:0.5.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//&gt; using dep &quot;org.virtuslab::besom-core:0.5.0&quot;</span><br></span></code></pre></div></div>
</li>
<li><code>Main.scala</code> - the actual program written in Scala<!-- -->
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">besom</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@main</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> main </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Pulumi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Stack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">warn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Nothing&#x27;s here yet, it&#x27;s waiting for you to write some code!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Pass <a href="/besom/docs/context/"><code>Context</code></a> everywhere you are using Besom&#x27;s resources or stack configuration outside of <code>Pulumi.run</code>
block with <code>(using besom.Context)</code> clause.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stacks">Stacks<a href="#stacks" class="hash-link" aria-label="Direct link to Stacks" title="Direct link to Stacks" translate="no">​</a></h3>
<p><a href="https://www.pulumi.com/docs/concepts/stack/" target="_blank" rel="noopener noreferrer">Pulumi stack</a> is a separate, isolated, independently configurable
instance of a Pulumi <a href="#programs">program</a>, and can be updated and referred to independently.
A <a href="#projects">project</a> can have as many stacks as needed.</p>
<p><a href="#projects">Projects</a> and <a href="#stacks">stacks</a> are intentionally flexible so that they can accommodate diverse needs
across a spectrum of team, application, and infrastructure scenarios. Learn more about organizing your code in
<a href="https://www.pulumi.com/docs/using-pulumi/organizing-projects-stacks" target="_blank" rel="noopener noreferrer">Pulumi projects and stacks</a> documentation.</p>
<p>By default, Pulumi creates a stack for you when you start a new project using the <code>pulumi new</code> command.
Each stack that is created in a project will have a file
named <a href="https://www.pulumi.com/docs/concepts/projects/#stack-settings-file" target="_blank" rel="noopener noreferrer"><code>Pulumi.&lt;stackname&gt;.yaml</code></a>
in the root of the <a href="#projects">project</a> directory that contains the <a href="#configuration-and-secrets">configuration</a> specific to this
stack.</p>
<p>The stack is represented in a Besom program by a <code>Stack</code> datatype that user is expected to return from the main <code>Pulumi.run</code> function. <code>Stack</code> is used to mark resources or values that stack depends on or that user wants to export as stack outputs. You can return a <code>Stack</code> that consists of exports only (for instance when everything you depend on is composed into a thing that you export in the final step) using <code>Stack.export(x = a, y = b)</code> or a <code>Stack</code> that has only dependencies when you don&#x27;t want to export anything using <code>Stack(x, y)</code>. You can also use some resources and export others using <code>Stack(a, b).export(x = i, y = j)</code> syntax.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The recommended practice is to <strong>check stack files into source control</strong> as a means of collaboration.<br>
Since secret values are encrypted, it is safe to check in these stack settings.</p></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="stack-and-project-information-from-code">Stack and project information from code<a href="#stack-and-project-information-from-code" class="hash-link" aria-label="Direct link to Stack and project information from code" title="Direct link to Stack and project information from code" translate="no">​</a></h5>
<p>You can access Pulumi stack and project information from your <a href="#programs">program</a> context using:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pulumiProject      </span><span class="token comment" style="color:#999988;font-style:italic">// the Pulumi project name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pulumiOrganization </span><span class="token comment" style="color:#999988;font-style:italic">// the Pulumi organization name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pulumiStack        </span><span class="token comment" style="color:#999988;font-style:italic">// the Pulumi stack name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">urn                </span><span class="token comment" style="color:#999988;font-style:italic">// the Pulumi stack URN</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="stack-outputs">Stack Outputs<a href="#stack-outputs" class="hash-link" aria-label="Direct link to Stack Outputs" title="Direct link to Stack Outputs" translate="no">​</a></h5>
<p>Stacks can export values as <a href="https://www.pulumi.com/docs/concepts/stack/#outputs" target="_blank" rel="noopener noreferrer">Stack Outputs</a>.
These outputs are shown by Pulumi CLI commands, and are displayed in the Pulumi Cloud, and can be accessed
programmatically using <a href="#stack-references">Stack References</a>.</p>
<p>To export values from a stack in Besom, use the <a href="/besom/docs/exports/"><code>Stack.exports</code></a> function in your program to assign exported values to the final <code>Stack</code> value.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="stack-references">Stack References<a href="#stack-references" class="hash-link" aria-label="Direct link to Stack References" title="Direct link to Stack References" translate="no">​</a></h5>
<p><a href="https://www.pulumi.com/docs/concepts/stack/#stackreferences" target="_blank" rel="noopener noreferrer">Stack Reference</a> allows you to use <a href="#stack-outputs">outputs</a> from
other <a href="#stacks">stacks</a> in your <a href="#programs">program</a>.</p>
<p>To reference values from another stack, create an instance of the <code>StackReference</code> type using the fully qualified
name of the stack as an input, and then read exported stack outputs by their name.</p>
<p>Here&#x27;s an example of how to use them:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@main</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> main </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Pulumi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Stack</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exports</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    someValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Hello world!&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    anotherValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">besom</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@main</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> main </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Pulumi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> otherStack </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> StackReference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;stackRef&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StackReferenceArgs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;organization/source-stack-test/my-stack-name&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> someValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> otherStack</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;someValue&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> anotherValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> otherStack</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">Int</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;anotherValue&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>This is a fine approach when the amount of exports from the source stack that you want to use is very limited. If you want a solution that&#x27;s a bit more scalable, continue to the next section.</p>
<p>StackReferences are resources and their resource constructors, like all other resource constructors, take a third, optional parameter of <code>StackReferenceResourceOptions</code>. You can find more about resource options <a href="https://www.pulumi.com/docs/iac/concepts/options/" target="_blank" rel="noopener noreferrer">in the Pulumi docs</a>.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="typed-stack-references-since-050">Typed Stack References <span class="badge badge--success text--uppercase text--bold">Since: 0.5.0</span><a href="#typed-stack-references-since-050" class="hash-link" aria-label="Direct link to typed-stack-references-since-050" title="Direct link to typed-stack-references-since-050" translate="no">​</a></h5>
<p>It&#x27;s also possible to use custom case classes to read the values of a StackReference. Here&#x27;s an example:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// source stack just as before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@main</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> main </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Pulumi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Stack</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exports</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    someValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Hello world!&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    anotherValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">besom</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// but on the referring side we can now use a proper type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// instead of reading values manually one by one:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> SourceStack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  someValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  anotherValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">derives</span><span class="token plain"> JsonReader </span><span class="token comment" style="color:#999988;font-style:italic">// note: you need to derive a JsonReader</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@main</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> main </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Pulumi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> sourceStackRef </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> StackReference</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SourceStack</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;stackRef&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StackReferenceArgs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;organization/source-stack-test/my-stack-name&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> sourceStack</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SourceStack</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sourceStackRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">outputs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>The only syntactical difference is that to use typed stack references you need to provide a desired output type to which you want to read the exports of the source stack: <code>StackReference[SourceStack](...)</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources" translate="no">​</a></h3>
<p>Resources are the primary <a href="https://www.pulumi.com/docs/concepts/resources/" target="_blank" rel="noopener noreferrer">construct of Pulumi</a> programs.
Resources represent the fundamental units that make up your infrastructure, such as a compute instance,
a storage bucket, or a Kubernetes cluster.</p>
<p>Resources are defined using a <a href="/besom/docs/constructors/"><strong>resource constructor</strong></a>. Each resource in Pulumi has:</p>
<ul>
<li>a <a href="https://www.pulumi.com/docs/concepts/resources/names/#resource-names" target="_blank" rel="noopener noreferrer">logical name and a physical name</a>
The logical name establishes a notion of identity within Pulumi, and the physical name is used as identity by the
provider</li>
<li>a <a href="https://www.pulumi.com/docs/concepts/resources/names/#types" target="_blank" rel="noopener noreferrer">resource type</a>, which identifies the provider and the
kind of resource being created</li>
<li><a href="https://www.pulumi.com/docs/concepts/resources/names/#types" target="_blank" rel="noopener noreferrer">Pulumi URN</a>, which is an automatically constructed
globally unique identifier for the resource.</li>
</ul>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> redisNamespace </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Namespace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation id function" style="color:#d73a49">s</span><span class="token string-interpolation string" style="color:#e3116c">&quot;redis-cluster-namespace-</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">$</span><span class="token string-interpolation interpolation expression">name</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redisNamespace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token comment" style="color:#999988;font-style:italic">// the Pulumi ID - a physical name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redisNamespace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">urn </span><span class="token comment" style="color:#999988;font-style:italic">// the Pulumi URN - a globally unique identifier</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redisNamespace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pulumiResourceName </span><span class="token comment" style="color:#999988;font-style:italic">// the Pulumi resource name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redisNamespace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">typeToken </span><span class="token comment" style="color:#999988;font-style:italic">// the Pulumi resource type token</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redisNamespace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">urn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">resourceName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// the logical name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redisNamespace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">urn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">resourceType</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// the resource type</span><br></span></code></pre></div></div>
<p>Each resource can also have:</p>
<ul>
<li>a set of <a href="https://www.pulumi.com/docs/iac/concepts/inputs-outputs/#inputs" target="_blank" rel="noopener noreferrer">inputs</a> by convention organized into
a family of classes called <code>Args</code> (because of the <code>Args</code> suffix they all have). Inputs placed into <code>Args</code> classes
define the shape and behavior of the resulting infrastructure</li>
<li>and a set of <a href="https://www.pulumi.com/docs/concepts/options/" target="_blank" rel="noopener noreferrer">options</a> that control how the resource is created and
managed by the Pulumi engine.</li>
</ul>
<p>Every <a href="#resources">resource</a> is managed by a <a href="#providers">provider</a> which is a plugin that
provides the implementation details. If not specified explicitly, the default provider is used.
Providers can be configured
using <a href="https://www.pulumi.com/docs/concepts/resources/providers/#explicit-provider-configuration" target="_blank" rel="noopener noreferrer">provider configuration</a>.</p>
<p>Static <a href="https://www.pulumi.com/docs/concepts/resources/get/" target="_blank" rel="noopener noreferrer">get functions</a> can be used to look up any existing resource that
is not managed by Pulumi. Here&#x27;s an example of how to use it:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@main</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> main </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Pulumi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> group </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> aws</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ec2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SecurityGroup</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;group&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sg-0dfd33cdac25b1ec9&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="shared-args-since-050">Shared Args <span class="badge badge--success text--uppercase text--bold">Since: 0.5.0</span><a href="#shared-args-since-050" class="hash-link" aria-label="Direct link to shared-args-since-050" title="Direct link to shared-args-since-050" translate="no">​</a></h4>
<p><code>Args</code> classes are code-generated and are quite different from normal case classes due to the fact that they
support <a href="/besom/docs/io/#inputs">a very elastic API</a> that makes the construction of Besom programs a breeze. Due to that
API it&#x27;s impossible to use <code>.copy</code> methods generated by the Scala compiler to reuse parameters for different
resources of the same kind. To alleviate that problem each <code>Args</code> class has a built-in <code>.withArgs</code> method that
does exactly the same as normal <code>.copy</code> method on a case class but with our permissive, <code>Input</code>-based API.</p>
<p>Here&#x27;s an example:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@main</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> main </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Pulumi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> privateKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrivateKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;4weeksPK&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrivateKeyArgs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">algorithm </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ECDSA&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> selfSignedCertSharedArgs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SelfSignedCertArgs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    allowedUses </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;key_encipherment&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;digital_signature&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    earlyRenewalHours </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">672</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 4 weeks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    privateKeyPem </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> privateKey</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">privateKeyPem</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validityPeriodHours </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">672</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 4 weeks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> longerCertValidityPeriodHours </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">672</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 8 weeks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> privateKeyForLongerCert </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrivateKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;8weeksPK&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrivateKeyArgs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">algorithm </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ECDSA&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// reuse all the configuration but extend validity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> selfSignedCertSharedArgsLongerValidity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> selfSignedCertSharedArgs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">withArgs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validityPeriodHours </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> longerCertValidityPeriodHours</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    privateKeyPem </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> privateKeyForLongerCert</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">privateKeyPem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> selfSignedCert </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SelfSignedCert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;selfSignedCert4weeks&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> selfSignedCertSharedArgs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> selfSignedCertLongerValidity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SelfSignedCert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;selfSignedCert8weeks&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selfSignedCertSharedArgsLongerValidity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Stack</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exports</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selfSignedCert </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> selfSignedCert</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">asSecret</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selfSignedCertLongerValidity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> selfSignedCertLongerValidity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">asSecret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resource-aliases-since-050">Resource Aliases <span class="badge badge--success text--uppercase text--bold">Since: 0.5.0</span><a href="#resource-aliases-since-050" class="hash-link" aria-label="Direct link to resource-aliases-since-050" title="Direct link to resource-aliases-since-050" translate="no">​</a></h4>
<p>When refactoring infrastructure-as-code programs one quickly notices that changing the name of a resource leads to
a situation where IaC engine deletes the old resource and creates a new one with the new name. This is usually not
the desired behavior. Here&#x27;s where resource aliases come in - it&#x27;s possible to inform Besom that a resource was
previously called differently by providing an alias via resource option <code>aliases</code>:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@main</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> main </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Pulumi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> redisNamespace </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Namespace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-interpolation id function" style="color:#d73a49">s</span><span class="token string-interpolation string" style="color:#e3116c">&quot;my-redis-cluster-ns-</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">$</span><span class="token string-interpolation interpolation expression">name</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    opts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> opts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aliases </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SpecResourceAlias</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation id function" style="color:#d73a49">s</span><span class="token string-interpolation string" style="color:#e3116c">&quot;redis-cluster-namespace-</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">$</span><span class="token string-interpolation interpolation expression">name</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>This will allow Pulumi to update the resource in place, instead of recreating it. The <code>aliases</code> parameter accepts
one or many (<code>Iterable</code>) aliases which can be either <code>SpecResourceAlias</code> or <code>UrnResourceAlias</code>, where the former
allows user to specify (optionally) the <code>name</code>, <code>type</code>, <code>stack</code>, <code>project</code> and <code>parent</code> of the aliased resource
and the latter allows to specify the full URN of the resource:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@main</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> main </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Pulumi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> redisNamespace </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Namespace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-interpolation id function" style="color:#d73a49">s</span><span class="token string-interpolation string" style="color:#e3116c">&quot;my-corporate-redis-cluster-ns-</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">$</span><span class="token string-interpolation interpolation expression">name</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    opts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> opts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aliases </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      UrnResourceAlias</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation id function" style="color:#d73a49">s</span><span class="token string-interpolation string" style="color:#e3116c">&quot;urn:pulumi:stackname::projectname::kubernetes:v1/namespace:Namespace::my-redis-cluster-ns-</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">$</span><span class="token string-interpolation interpolation expression">name</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SpecResourceAlias</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation id function" style="color:#d73a49">s</span><span class="token string-interpolation string" style="color:#e3116c">&quot;redis-cluster-namespace-</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">$</span><span class="token string-interpolation interpolation expression">name</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>To learn more about aliases please visit <a href="https://www.pulumi.com/docs/iac/concepts/options/aliases/" target="_blank" rel="noopener noreferrer">this Pulumi docs page</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="inputs-and-outputs">Inputs and Outputs<a href="#inputs-and-outputs" class="hash-link" aria-label="Direct link to Inputs and Outputs" title="Direct link to Inputs and Outputs" translate="no">​</a></h3>
<p>Inputs and Outputs are the
primary <a href="https://www.pulumi.com/docs/concepts/inputs-outputs/" target="_blank" rel="noopener noreferrer">asynchronous data types in Pulumi</a>,
and they signify values that will be provided by the engine later, when the resource is created and its properties can
be fetched.
<code>Input[A]</code> type is an alias for <code>Output[A]</code> type used by <a href="#resources">resource</a> arguments. Inputs are
<a href="/besom/docs/io/#inputs">very elastic</a> in what they can receive to facilitate preview-friendly, declarative model of programming.</p>
<p>Outputs are values of type <code>Output[A]</code> and behave very much
like <a href="https://en.wikipedia.org/wiki/Monad_(functional_programming)" target="_blank" rel="noopener noreferrer">monads</a>.
This is necessary because output values are not fully known until the infrastructure resource has actually completed
provisioning, which happens asynchronously after the program has finished executing.</p>
<p>Outputs are used to:</p>
<ul>
<li>automatically captures dependencies between <a href="#resources">resources</a></li>
<li>provide a way to express transformations on its value before it&#x27;s known</li>
<li>defer the evaluation of its value until it&#x27;s known</li>
<li>track the <em>secretness</em> of its value</li>
</ul>
<p>Output transformations available in Besom:</p>
<ul>
<li><a href="/besom/docs/apply_methods/"><code>map</code> and <code>flatMap</code></a> methods take a callback that receives the plain value, and computes a new
output</li>
<li><a href="/besom/docs/lifting/">lifting</a> directly read properties off an output value</li>
<li><a href="/besom/docs/interpolator/">interpolation</a> concatenate string outputs with other strings directly</li>
<li><code>sequence</code> method combines multiple outputs into a single output of a collection (<code>parSequence</code> variant is also available
for explicit parallel evaluation)</li>
<li><code>zip</code> method combines multiple outputs into a single output of a tuple</li>
<li><code>traverse</code> method transforms a collection of values into a single output of a collection ((<code>parTraverse</code> variant is also available
for explicit parallel evaluation))</li>
</ul>
<p>To create an output from a plain value, use the <code>Output</code> constructor, e.g.:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> hello </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hello&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> world </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">secret</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;world&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>To transform an output value, use the <code>map</code> and <code>flatMap</code> methods, e.g.:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> hello </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hello&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">toUpperCase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> world </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">secret</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;world&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> helloWorld</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hello</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flatMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">h </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"> h </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;_&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> world</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">toUpperCase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>If you have multiple outputs of the same type and need to use them together <strong>as a list</strong> you can use
<code>Output.sequence</code> method to combine them into a single output:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> port</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> host</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hostname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> hello</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">host</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sequence </span><span class="token comment" style="color:#999988;font-style:italic">// we use the extension method here</span><br></span></code></pre></div></div>
<p>If you have multiple outputs of different types and need to use them together <strong>as a tuple</strong> you can use the standard
<a href="https://scala-lang.org/api/3.x/scala/collection/View.html#zip-1dd" target="_blank" rel="noopener noreferrer"><code>zip</code></a> method and pattern matching (<code>case</code>) to
combine them into a single output:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> port</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">Int</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">port</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> host</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hostname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> hello</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> host</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">zip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hello</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">map </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hostname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> portValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"> </span><span class="token string-interpolation id function" style="color:#d73a49">s</span><span class="token string-interpolation string" style="color:#e3116c">&quot;https://</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">$</span><span class="token string-interpolation interpolation expression">hostname</span><span class="token string-interpolation string" style="color:#e3116c">:</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">$</span><span class="token string-interpolation interpolation expression">portValue</span><span class="token string-interpolation string" style="color:#e3116c">/&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>If you have a map of outputs and need to use them together <strong>as a map</strong> you can use
<code>Output.traverse</code> method to combine them into a single output:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> m</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> pod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> o</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">traverse </span><span class="token comment" style="color:#999988;font-style:italic">// we use the extension method here</span><br></span></code></pre></div></div>
<p>You can also use <code>Output.traverse</code> like that:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> names</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;John&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Paul&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> outputNames</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> names</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">traverse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>To access <code>String</code> outputs directly, use the <a href="/besom/docs/interpolator/">interpolator</a>:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> port</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">Int</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">port</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> host</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hostname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> https</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string-interpolation id function" style="color:#d73a49">p</span><span class="token string-interpolation string" style="color:#e3116c">&quot;https://</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">$</span><span class="token string-interpolation interpolation expression">host</span><span class="token string-interpolation string" style="color:#e3116c">:</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">$</span><span class="token string-interpolation interpolation expression">port</span><span class="token string-interpolation string" style="color:#e3116c">/api/&quot;</span><br></span></code></pre></div></div>
<p>We encourage you to learn more about relationship between <a href="#resources">resources</a> and <a href="#inputs-and-outputs">outputs</a>
in the <a href="/besom/docs/constructors/">Resource constructors and asynchronicity</a> section.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-and-secrets">Configuration and Secrets<a href="#configuration-and-secrets" class="hash-link" aria-label="Direct link to Configuration and Secrets" title="Direct link to Configuration and Secrets" translate="no">​</a></h3>
<p><a href="https://www.pulumi.com/docs/concepts/config" target="_blank" rel="noopener noreferrer">Configuration</a> or <a href="https://www.pulumi.com/docs/concepts/secrets/" target="_blank" rel="noopener noreferrer">Secret</a>
is a set of key-value pairs that influence the behavior of a Pulumi program.</p>
<p>Configuration or secret keys use the format <code>[&lt;namespace&gt;:]&lt;key-name&gt;</code>, with a colon delimiting the optional namespace
and the actual key name. Pulumi automatically uses the current project name
from <a href="https://www.pulumi.com/docs/concepts/projects/#pulumi-yaml" target="_blank" rel="noopener noreferrer"><code>Pulumi.yaml</code></a> as the default key namespace.</p>
<p>Configuration values can be set in two ways:</p>
<ul>
<li><a href="https://www.pulumi.com/docs/concepts/projects/#stack-settings-file" target="_blank" rel="noopener noreferrer"><code>Pulumi.&lt;stackname&gt;.yaml</code></a> file</li>
<li><a href="https://www.pulumi.com/docs/concepts/config/#setting-and-getting-configuration-values" target="_blank" rel="noopener noreferrer"><code>pulumi config set</code></a>
and <a href="https://www.pulumi.com/docs/concepts/secrets/#secrets" target="_blank" rel="noopener noreferrer"><code>pulumi config set --secret</code></a> commands</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="accessing-configuration-and-secrets-from-code">Accessing Configuration and Secrets from Code<a href="#accessing-configuration-and-secrets-from-code" class="hash-link" aria-label="Direct link to Accessing Configuration and Secrets from Code" title="Direct link to Accessing Configuration and Secrets from Code" translate="no">​</a></h5>
<p>Configuration and secret values can be <a href="https://www.pulumi.com/docs/concepts/config/#code" target="_blank" rel="noopener noreferrer">accessed</a> from <a href="#programs">programs</a>
using the <code>Config.get*</code> and <code>Config.require*</code> method family, e.g.:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> a</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Option</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;aws:region&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> b</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">requireString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;aws:profile&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> c</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Output</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Option</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">String</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;aws&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;region&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>If the configuration value is a <strong>secret</strong>, it will be <strong>automatically marked</strong> internally as such and <strong>redacted</strong> in console outputs.</p>
<p><a href="https://www.pulumi.com/docs/concepts/config/#structured-configuration" target="_blank" rel="noopener noreferrer">Structured Configuration</a> is also supported
in two flavors: JSON AST (<code>config.getJson</code> or <code>config.requireJson</code>) or object deserialization (<code>config.getObject</code> or <code>config.requireObject</code>)
and can be used to read Pulumi configuration in more advanced use cases.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Secret values are automatically <a href="https://www.pulumi.com/docs/concepts/secrets/#configuring-secrets-encryption" target="_blank" rel="noopener noreferrer">encrypted and stored</a> in the Pulumi <a href="#state">state</a>.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Secrets in Besom differ in behavior from other Pulumi SDKs. In other SDKs, if you try to get a config key that is a
secret, you will obtain it as plaintext (and due to <a href="https://github.com/pulumi/pulumi/issues/7127" target="_blank" rel="noopener noreferrer">a bug</a> you won&#x27;t even get a warning).</p><p>We choose to do the right thing in Besom and <strong>return all configs as Outputs</strong> so that we can handle failure in pure,
functional way, and <strong>automatically</strong> mark secret values <strong>as <a href="https://www.pulumi.com/docs/concepts/secrets/#how-secrets-relate-to-outputs" target="_blank" rel="noopener noreferrer">secret Outputs</a></strong>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="providers">Providers<a href="#providers" class="hash-link" aria-label="Direct link to Providers" title="Direct link to Providers" translate="no">​</a></h3>
<p>A <a href="https://www.pulumi.com/docs/concepts/resources/providers/" target="_blank" rel="noopener noreferrer">resource provider</a> is a plugin that handles communications with a cloud service to create, read, update, and delete the resources
you define in your Pulumi <a href="#programs">programs</a>.</p>
<p>You import a Provider SDK (e.g. <code>import besom.api.aws</code>) library in you <a href="#programs">program</a>, Pulumi passes your code to
the language host plugin (i.e. <code>pulumi-language-scala</code>), waits to be notified of resource registrations, assembles
a model of your desired <a href="#state">state</a>, and calls on the resource provider (e.g. <code>pulumi-resource-aws</code>) to produce that
state.
The resource provider translates those requests into API calls to the cloud service or platform.</p>
<p>Providers can be configured
using <a href="https://www.pulumi.com/docs/concepts/resources/providers/#explicit-provider-configuration" target="_blank" rel="noopener noreferrer">provider configuration</a>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>It is recommended to <a href="https://www.pulumi.com/blog/disable-default-providers/" target="_blank" rel="noopener noreferrer">disable default providers</a> if not for <a href="https://www.pulumi.com/docs/concepts/config#pulumi-configuration-options" target="_blank" rel="noopener noreferrer">all providers, at least for Kubernetes</a>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="state">State<a href="#state" class="hash-link" aria-label="Direct link to State" title="Direct link to State" translate="no">​</a></h3>
<p>State is a snapshot of your <a href="#projects">project</a> <a href="#resources">resources</a> that is stored in
a <a href="https://www.pulumi.com/docs/concepts/state/#deciding-on-a-state-backend" target="_blank" rel="noopener noreferrer">backend</a> with <a href="https://www.pulumi.com/docs/intro/cloud-providers/pulumi-service/" target="_blank" rel="noopener noreferrer">Pulumi Service</a> being the default.</p>
<p>State is used to:</p>
<ul>
<li>track <a href="#resources">resources</a> that are created by your <a href="#programs">program</a></li>
<li>record the relationship between resources</li>
<li>store metadata about your <a href="#projects">project</a> and <a href="#stacks">stacks</a></li>
<li>and store <a href="#configuration-and-secrets">configuration</a> and secret values</li>
<li>and store <a href="#stack-outputs">stack outputs</a></li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Fore extra curious <a href="https://pulumi-developer-docs.readthedocs.io/en/latest/architecture/deployment-schema.html" target="_blank" rel="noopener noreferrer">here&#x27;s the internal state schema</a></p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/VirtusLab/besom/tree/main/website/docs/basics.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/besom/docs/tutorial/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Tutorial</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/besom/docs/architecture/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-pulumi" class="table-of-contents__link toc-highlight">What is Pulumi?</a></li><li><a href="#what-is-besom" class="table-of-contents__link toc-highlight">What is Besom?</a></li><li><a href="#concepts" class="table-of-contents__link toc-highlight">Concepts</a><ul><li><a href="#projects" class="table-of-contents__link toc-highlight">Projects</a></li><li><a href="#programs" class="table-of-contents__link toc-highlight">Programs</a></li><li><a href="#stacks" class="table-of-contents__link toc-highlight">Stacks</a></li><li><a href="#resources" class="table-of-contents__link toc-highlight">Resources</a></li><li><a href="#inputs-and-outputs" class="table-of-contents__link toc-highlight">Inputs and Outputs</a></li><li><a href="#configuration-and-secrets" class="table-of-contents__link toc-highlight">Configuration and Secrets</a></li><li><a href="#providers" class="table-of-contents__link toc-highlight">Providers</a></li><li><a href="#state" class="table-of-contents__link toc-highlight">State</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 VirtusLab Sp. z o.o.  Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>